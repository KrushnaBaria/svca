!function($,conf,viewInit){"use strict";({initDashboard:function(){console.log("Dashboard initialized")},initSettings:function(){let dtable=$("#centers-tbl"),centerTbl=new DataTable("#centers-tbl",{responsive:!0,searching:void 0===dtable.data("dt-searching")||dtable.data("dt-searching"),lengthChange:void 0===dtable.data("dt-lengthchange")||dtable.data("dt-lengthchange"),processing:!0,serverSide:!0,bSortable:!0,bFilter:!0,pagingType:"full_numbers",ajax:{url:conf.baseUrl+"/settings/getCenters",type:"post"},lengthMenu:[[2,5,10,20],[2,5,10,20]],pageLength:void 0===dtable.data("dt-pagelength")||"-1"===dtable.data("dt-pagelength")?2:dtable.data("dt-pagelength"),paging:!0,ordering:!1,columnDefs:[{targets:[0],orderable:!1,data:function(row){return row.id}},{targets:[1],orderable:!0,data:function(row){return row.center}},{targets:[2],orderable:!1,data:function(row){return'<button class="btn btn-danger btn-sm delete-center" data-id="'+row.id+'">Delete</button>'}}]});$("#sbt-center").on("click",(function(e){e.preventDefault(),""!==$("#center_name").val()?$.ajax({url:conf.baseUrl+"/settings/add-center",type:"POST",dataType:"json",data:{center_name:$("#center_name").val()},success:function(res){1==res.success?($("#center_name").val(""),alert("Center Added Successfully."),centerTbl.ajax.reload()):alert("Error updating center name")},error:function(){alert("An error occurred while updating the center name.")}}):alert("Please enter a center name.")}));let coursetbl=$("#course-tbl"),courseTbl=new DataTable("#course-tbl",{responsive:!0,searching:void 0===coursetbl.data("dt-searching")||coursetbl.data("dt-searching"),lengthChange:void 0===coursetbl.data("dt-lengthchange")||coursetbl.data("dt-lengthchange"),processing:!0,serverSide:!0,bSortable:!0,bFilter:!0,pagingType:"full_numbers",ajax:{url:conf.baseUrl+"/settings/getCourses",type:"post"},lengthMenu:[[5,10,20,-1],[5,10,20,"All"]],pageLength:void 0===coursetbl.data("dt-pagelength")||"-1"===coursetbl.data("dt-pagelength")?5:coursetbl.data("dt-pagelength"),paging:!0,ordering:!1,columnDefs:[{targets:[0],orderable:!1,data:function(row){return row.id}},{targets:[1],orderable:!0,data:function(row){return row.course}},{targets:[2],orderable:!1,data:function(row){return'<button class="btn btn-danger btn-sm delete-center" data-id="'+row.id+'">Delete</button>'}}]});$("#sbt-course").on("click",(function(e){e.preventDefault(),""!==$("#course_name").val()?$.ajax({url:conf.baseUrl+"/settings/add-course",type:"POST",dataType:"json",data:{course_name:$("#course_name").val()},success:function(res){1==res.success?($("#course_name").val(""),alert("Course Added Successfully."),courseTbl.ajax.reload()):alert("Error updating course")},error:function(){alert("An error occurred while updating the course.")}}):alert("Please enter a course name.")}))},initAddStudent:function(){document.getElementById("dob").addEventListener("input",(function(e){let value=e.target.value.replace(/\D/g,"").slice(0,8);value.length>=5?value=value.replace(/(\d{2})(\d{2})(\d{1,4})/,"$1/$2/$3"):value.length>=3&&(value=value.replace(/(\d{2})(\d{1,2})/,"$1/$2")),e.target.value=value})),$("#sbt-student").on("click",(function(e){if(e.preventDefault(),""==$("#s_name").val())return $("#s_name").focus(),!1;if(""==$("#f_name").val())return $("#f_name").focus(),!1;if(""==$("#dob").val())return $("#dob").focus(),!1;if(""==$("#dob").val())return $("#dob").focus(),!1;if(""==$("#p_number").val())return $("#p_number").focus(),!1;if(""==$("#per").val())return $("#per").focus(),!1;if(""==$("#b_time1").val())return $("#b_time1").focus(),!1;if(""==$("#b_time2").val())return $("#b_time2").focus(),!1;if(""==$("#adhar").val())return $("#adhar").focus(),!1;let gender=$('input[name="gender"]:checked').val();if(!gender)return $('input[name="gender"]').first().focus(),!1;let m_sts=$('input[name="marital_sts"]:checked').val();if(!m_sts)return $('input[name="marital_sts"]').first().focus(),!1;let b_time=$("#b_time1").val()+" - "+$("#b_time2").val();$.ajax({url:conf.baseUrl+"student/add",type:"POST",dataType:"json",data:{s_name:$("#s_name").val(),f_name:$("#f_name").val(),m_name:$("#m_name").val()?$("#m_name").val():"",p_number:$("#p_number").val()?$("#p_number").val():"",ap_number:$("#ap_number").val()?$("#ap_number").val():"",dob:$("#dob").val(),gender:gender,marital_sts:m_sts,lst_qulifi:$("#lst_qulifi").val()?$("#lst_qulifi").val():"",per:$("#per").val()?$("#per").val():"",course:$("#course").val()?$("#course").val():"",cast:$("#cast").val()?$("#cast").val():"",b_time:b_time||"",adhar:$("#adhar").val()?$("#adhar").val():"",dist:$("#dist").val()?$("#dist").val():"",center:$("#center").val()?$("#center").val():"",address:$("#address").val()?$("#address").val():""},success:function(res){1==res.success?alert("Student Added Successfully."):alert("Error adding student")},error:function(){alert("An error occurred while adding the student.")}})}))},initStudentList:function(){let studentTbl=new DataTable("#student-tbl",{responsive:!0,searching:!0,lengthChange:!0,processing:!0,serverSide:!0,bSortable:!0,bFilter:!0,pagingType:"full_numbers",ajax:{url:conf.baseUrl+"/student/getStudents",type:"post"},lengthMenu:[[5,10,20,-1],[5,10,20,"All"]],pageLength:5,paging:!0,ordering:!1,columnDefs:[{targets:[0],orderable:!1,data:function(row){return row.id}},{targets:[1],orderable:!0,data:function(row){return row.name}},{targets:[2],orderable:!1,data:function(row){return row.center_name}},{targets:[3],orderable:!0,data:function(row){return row.pnumber}},{targets:[4],orderable:!0,data:function(row){return row.apnumber&&row.apnumber.length>1?row.apnumber:"-"}},{targets:[5],orderable:!0,data:function(row){return row.course_name}},{targets:[6],orderable:!1,data:function(row){return row.dob}},{targets:[7],orderable:!1,data:function(row){return""}}]});$("#student-tbl").on("click",".delete-student",(function(){let studentId=$(this).data("id");confirm("Are you sure you want to delete this student?")&&$.ajax({url:conf.baseUrl+"/student/delete/"+studentId,type:"POST",success:function(res){1==res.success?(alert("Student deleted successfully."),studentTbl.ajax.reload()):alert("Error deleting student")},error:function(){alert("An error occurred while deleting the student.")}})}))},init:function(calltoinit){"function"==typeof this[calltoinit]&&this[calltoinit]()}}).init(viewInit)}(window.jQuery,window.SvcaConfig,window.SvcaViewInit);